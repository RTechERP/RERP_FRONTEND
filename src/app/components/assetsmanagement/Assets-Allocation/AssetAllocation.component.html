<div class="layout-wrapper d-flex" style="height: 100%">
  <app-asset-modal></app-asset-modal>
  <!-- Offcanvas cho tìm kiếm -->


  <div class="offcanvas offcanvas-left custom-offcanvas border border-1" tabindex="-1" id="searchOffcanvas"
    data-bs-backdrop="false">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title">Tìm kiếm tài sản</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body pt-2 pb-0">
      <div class="form-group">
        <label for="searchInput">Từ khóa tìm kiếm</label>
        <input id="searchInput" class="form-control form-control-sm" style="font-size:13px;" [(ngModel)]="searchText"
          (ngModelChange)="onSearchChange()" placeholder="Nhập từ khóa..." />
      </div>
     <div class="form-group">
        <label>Từ ngày</label>
        <input type="date" name="date_start" [(ngModel)]="dateStart" (ngModelChange)="onFilterChange()"
          class="form-control form-control-sm" required />
      </div>
      <div class="form-group">
        <label>Đến ngày</label>
        <input type="date" name="date_end" [(ngModel)]="dateEnd" (ngModelChange)="onFilterChange()"
          class="form-control form-control-sm" required />
      </div>
      <div class="form-group">
        <label for="statusSelect">Trạng thái sử dụng:</label>

      </div>
      <div class="form-group">
        <label for="employeeSelect">Nhân viên</label>
        <ng-select [items]="emplylist" bindLabel="FullName" bindValue="ID" [(ngModel)]="employeeID"
          (change)="onFilterChange()" placeholder="-- Chọn nhân viên --" [clearable]="false">
          <ng-template ng-label-tmp let-item="item">
           {{ item?.FullName }}
          </ng-template>
       
        </ng-select>

      </div>
      <div class="form-group">
        <button class="btn btn-outline-primary m-1" (click)="onFilterChange()" data-bs-dismiss="offcanvas">
          <i class="fas fa-magnifying-glass me-2"></i> Tìm kiếm
        </button>

        <button class="btn btn-outline-secondary ms-2" (click)="clearAllFilters()">
          <i class="fas fa-eraser me-2"></i> Xóa lọc
        </button>
      </div>
    </div>
  </div>
  <!-- Nội dung chính -->
  <div class="container-fluid project-container">
    <!-- Thanh công cụ -->
    <div class="d-flex align-items-center p-2">
      <div class="card-header">
        <button id="addBtn" class="btn btn-outline-primary m-1 m-1" (click)="OpenModalCapphat()">
          <i class="fas fa-plus me-2"></i>
        </button>

        <button id="editBtn" class="btn btn-outline-success m-1" (click)="openEditModal()">
          <i class="fas fa-edit me-2"></i>
        </button>
        <button class="btn btn-outline-danger m-1" (click)="DeleteALLocationn()">
          <i class="fas fa-trash-alt me-2"></i>
        </button>
        <button class="btn btn-outline-primary me-2" type="button" data-bs-toggle="offcanvas"
          data-bs-target="#searchOffcanvas" aria-controls="searchOffcanvas" title="Tìm kiếm">
          <i class="fas fa-magnifying-glass"></i>
        </button>
        <button class="btn btn-outline-success m-1" (click)="handleApprovalAction('HR_APPROVE')">
          <i class="fas fa-check me-2" style="color: #66CC00;"></i>HR duyệt
        </button>

        <button class="btn btn-outline-danger m-1" (click)="handleApprovalAction('HR_CANCEL')">
          <i class="fas fa-xmark me-2" style="color: #ff0000;"></i>HR Hủy Duyệt
        </button>

        <button class="btn btn-outline-success m-1" (click)="handleApprovalAction('ACCOUNTANT_APPROVE')">
          <i class="fas fa-check me-2" style="color: #66CC00;"></i>KT duyệt
        </button>

        <button class="btn btn-outline-danger m-1" (click)="handleApprovalAction('ACCOUNTANT_CANCEL')">
          <i class="fas fa-xmark me-2" style="color: #ff0000;"></i>KT Hủy duyệt
        </button>



        <button id="addBtn" class="btn btn-outline-success m-1 m-1" (click)="exportToExcel()">
          <i class="fas fa-file-excel me-2"></i>Xuất phiếu
        </button>
      </div>
    </div>
    <!-- Modal thêm/sửa tài sản -->

    <!-- Bảng dữ liệu -->
    <div class="card-body" style=" margin-top:1rem;">
      <div class="mb-2" id="datatableassetallocation"></div>
    </div>
    <div style="height: 25vh;" id="databledetailta"></div>
  </div>
</div>